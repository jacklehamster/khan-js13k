let i=document.querySelector.bind(document);let S=i("canvas");let C=S.getContext("2d");let h=S.style;S.width=2e3;h.width=`${S.width/2}px`;S.height=1200;h.height=`${S.height/2}px`;h.border="1px solid black";h.backgroundColor="#efd";h.transition="background-color 0.5s";const l=.75;const n={};document.addEventListener("keyup",e=>{delete n[e.code]});document.addEventListener("keydown",e=>{n[e.code]=true;e.preventDefault()});const s=[];const $=[0,0];const k={speedWhileShooting:2,speed:2,maxHealth:2,shield:0,quickShot:1,money:2};const d=6;let f=d;const e=document.body.appendChild(document.createElement("div"));e.style.position="absolute";e.style.top="10px";e.style.left="10px";function u(){const t=d+k.maxHealth*2;let n="";for(let e=0;e<Math.floor(f/2);e++){n+="â¤ï¸"}if(f%2){n+="â¤ï¸â€ðŸ©¹"}for(let e=Math.ceil(f/2);e<t/2;e++){n+="ðŸ©¶"}e.innerText=n}let E=0;const t=document.body.appendChild(document.createElement("div"));t.style.position="absolute";t.style.top="30px";t.style.left="10px";function O(){t.textContent=!E?"":`â­ ${E}`}const o=document.body.appendChild(document.createElement("div"));o.style.position="absolute";o.style.top="50px";o.style.left="10px";o.style.color="snow";o.textContent="Press ESC to continue";o.style.display="none";function v(){o.style.display=""}function a(e){const t=[];const n=new XMLHttpRequest;n.open("GET",e,false);n.overrideMimeType("text/plain; charset=x-user-defined");n.send(null);if(n.status===200){for(let e=0;e<n.responseText.length;++e){t.push(n.responseText.charCodeAt(e)&255)}}return t}let c=true;window.addEventListener("blur",function(e){c=false},false);window.addEventListener("focus",function(e){c=true},false);let T;document.addEventListener("DOMContentLoaded",()=>{const e=a("rider.13k");T=he(e);console.log(T);oe(0)});const w=1600;const b=1e3;let A=5;function K(n,o,r,i,a,s,d,e,l,c,t){const h=i/w;const f=a/b;n.fillStyle=e??"black";T.shapes.forEach(e=>{if(e.hidden||e.anim!==d){return}const t=e.lines[s%e.lines.length];if(t){n.beginPath();j(n,o,r,t[0]*h,t[1]*f,false,i,a,l,c);for(let e=2;e<t.length;e+=2){j(n,o,r,t[e]*h,t[e+1]*f,true,i,a,l,c)}n.closePath()}n.fill()})}function j(e,t,n,o,r,i,a,s,d,l){if(i){e.lineTo(t+o,n+r+(o/a-.5)*15*d+l*(Math.random()-.5))}else{e.moveTo(t+o,n+r+(o/a-.5)*15*d+l*(Math.random()-.5))}}const _=.5;function B(e){F[e].x=F[q-1].x;F[e].y=F[q-1].y;F[e].dx=F[q-1].dx;F[e].dy=F[q-1].dy;F[e].born=F[q-1].born;q--}let q=0;const F=[];function U(e){const{x:t,y:n,dx:o,dy:r,archerOrientation:i}=e;if(q>=F.length){F.push({})}F[q].dx=i*120+o*2;F[q].dy=-5+r*10;F[q].x=t+F[q].dx;F[q].y=n-80*l;F[q].born=e.time;q++}function G(e){const t=e.dt/20;const n=P(e.ax,e);const o=P(e.ay,e);const r=Math.sqrt(n*n+o*o);if(n!==0){e.orientation=n}const i=P(e.speed,e)*(e.dead?2:1)*(e.superSoldier&&e.soldier?.7:1);const a=e.brake;if(r){e.dx=(e.dx+n/r*i)*a;e.dy=(e.dy+o/r*i/2)*a}else{e.dx=e.dx*a;e.dy=e.dy*a}if(P(e.moving,e)){e.x+=e.dx*t;e.y+=e.dy*t}const s=Math.sqrt(e.dx*e.dx+e.dy*e.dy);e.horseFrame+=t*Math.max(.08,s/50)}function z(e){H.x=e.x;H.y=e.y+200;H.dx=0;H.dy=0;R(Y).closed=true;Y=null}const L={parent:true,time:0,nextShot:0,process:e=>{if(!e.parent){return}if(Y){if(n.Escape){z(Y);o.style.display="none"}else{return}}if(!f){if(n.Escape){f=d+k.maxHealth*2;E=0;H.dead=0;o.style.display="none";O();u()}}if(!f&&e.hero){return}G(e);const t=P(e.shooting,e);if(!t){e.archerOrientation=e.orientation}else{if(e.time>e.nextShot){U(e);e.nextShot=e.time+P(e.shootPeriod,e)}}},shootPeriod:300,archerOrientation:1,orientation:1,direction:undefined,brake:.99,speed:e=>P(e.shooting,e)?.03+k.speedWhileShooting*.02:.05+k.speed*.03,x:300,y:500,moving:e=>Math.abs(e.dx)>_||Math.abs(e.dy)>_,shooting:()=>n.Space,ax:()=>(n.KeyA||n.ArrowLeft?-1:0)+(n.KeyD||n.ArrowRight?1:0),ay:()=>(n.KeyW||n.ArrowUp?-1:0)+(n.KeyS||n.ArrowDown?1:0),dx:0,dy:0,width:250*l,height:200*l,hotspot:undefined,born:0,animation:undefined,range:undefined,color:undefined,horseFrame:0,random:0,riderAnimation:"archer",layer:0,hidden:false,tree:false,cache:false,sprites:[e=>P({...e,y:e=>P(e.y,e)-.1,parent:false,sprites:undefined,animation:e=>P(e.riderAnimation,e),range:e=>P(e.rangeOverride,e)??(P(e.shooting,e)?[0,3]:[0]),hotspot:[e=>P(e.moving,e)?.5-e.orientation*P(e.archerOrientation,e)*.05:.53,e=>P(e.moving,e)?.65+Math.sin(e.horseFrame*.7)/100:.7],color:e=>P(e.foeColor,e)??(e.corpse?e.color:e.hill?"#af8":e.tree?"#270":"black"),direction:e=>Math.sign(P(e.archerOrientation,e)),frame:e=>P(e.horseFrame,e),random:4,hidden:e=>e.dead},e),e=>P({...e,y:e=>P(e.y,e),parent:false,sprites:undefined,animation:e=>e.hill?"hut":"horse",range:e=>e.hill?[0]:P(e.moving,e)?[0,10]:[11],hotspot:[.47,.72],color:e=>e.hill&&R(e).closed?"#ba6":e.superSoldier?"#a08":e.foe?"#004":"#630",direction:e=>Math.sign(e.orientation),frame:e=>P(e.horseFrame,e),random:e=>e.superSoldier?100:4,hidden:e=>e.tree&&!e.hill||e.corpse||e.soldier},e),e=>P({...e,y:e=>P(e.y,e)+1,parent:false,sprites:undefined,animation:"shield",range:[0],hotspot:[.47,.72],color:()=>k.shield>1?"gold":"#69f",direction:e=>Math.sign(e.orientation),frame:e=>0,hidden:e=>e.foe||e.corpse||e.soldier||!k.shield},e),e=>P({...e,layer:-2,parent:false,sprites:undefined,animation:e=>e.soldier?"soldier":e.corpse?"dead":e.hill?"hill":e.tree?"tree":"horse",range:e=>e.corpse?P(e.rangeOverride,e):e.tree?[0]:P(e.moving,e)?[0,10]:[11],hotspot:e=>e.tree?[.53,1]:[.47,.72],color:"#999",direction:e=>Math.sign(e.orientation),height:-50,frame:e=>P(e.horseFrame,e),hidden:e=>e.dead&&e.soldier},e)]};function P(t,n){if(typeof t==="object"){if(Array.isArray(t)){return t.map(e=>P(e,n))}else{const o={};for(let e in t){o[e]=P(t[e],n)}return o}}return typeof t==="function"?t(n):t}function y(e,b,t,A){e.dt=t;e.time=b;const n=P(e.sprites,e);n.forEach(e=>{const{x:t,y:n,width:o,height:r,hotspot:i,foeIndex:a,dead:s,color:d,foeColor:l,superSoldier:c,hidden:h,tree:f}=e;if(h||Y&&!f){return}const u=t-i[0]*o-$[0];const y=n-i[1]*r-$[1];const m=u+o;const p=y+r;if(m<0||p<0||u>S.width||y>S.height){return}if(a!==undefined&&!s){for(let e=q-1;e>=0;e--){const x=F[e];if(x.x-$[0]>u&&x.x-$[0]<m&&x.y-$[1]>y&&x.y-$[1]<p){const g=c?Math.random()<.05:true;if(g){W[a].dead=b;V(W[a],b,x.dx,l??d);const M=H.x-W[a].x;const v=H.y-W[a].y;const w=Math.sqrt(M*M+v*v);W[a].dx=0;W[a].dy=0;W[a].goal[0]=W[a].x+-M/w*2e3;W[a].goal[1]=W[a].y+-v/w*2e3;E+=(c?6:10)*(1+.5*k.money);O()}else{W[a].hitTime=b}B(e);if(k.quickShot){H.nextShot=b+50}}}}A.push(e)})}const I={};function J(e){let{x:t,y:n,width:o,height:r,animation:i,horseFrame:a,range:s,hotspot:d,color:l,time:c,hitTime:h,dead:f,direction:u,dy:y,random:m,hidden:p,cache:x,hero:g,hill:M}=e;if(M&&!R(e).closed){X=e}if(h&&c-h<50){l=g?"red":"white"}let v=s[0]+(s.length<=1?0:Math.floor(a)%(s[1]-s[0]+1));const w=P(u,L);const b=P(y,L);if(x){const A=T.animations.indexOf(i);const S=`${i}-${v}-${l}-${w}-${o}-${r}`;if(!I[S]){I[S]={canvas:document.createElement("canvas")};I[S].canvas.width=o;I[S].canvas.height=r;I[S].canvas.getContext("2d").lineWidth=6;I[S].canvas.getContext("2d").strokeStyle="black";K(I[S].canvas.getContext("2d"),w<0?o:0,r<0?-r:0,o*w,r,v,A,l,0,0)}C.drawImage(I[S].canvas,t-d[0]*o-$[0],n-(r<0?0:d[1]*r)-$[1]+D);return}const A=T.animations.indexOf(i);K(C,t-d[0]*o*w-$[0],n-d[1]*r-$[1]+D,o*w,r,v,A,l,b,m)}const N=60;const Q=1e3/N;let m=0;let p=0;function x(t){if(typeof t==="object"){if(Array.isArray(t)){const o=[...t];for(let e=0;e<o.length;e++){o[e]=x(t[e])}return o}const n={...t};for(let e in n){n[e]=x(t[e])}return n}return t}const H={...x(L),hero:true};let D=0;let g=0;const M=[];function V(e,t,r,n){const o={...x(L),corpse:true,horseFrame:0,x:e.x,y:e.y,rangeOverride:[0,4],range:undefined,archerOrientation:r<0?1:-1,cache:true,riderAnimation:"dead",born:t,color:n,process:e=>{const t=e.time-e.born;const n=Math.floor(t/50);const o=P(e.rangeOverride[1],e);e.horseFrame=Math.min(n,o);if(e.horseFrame<o){e.x+=r*e.dt/1e3}},width:e.width,height:e.height};if(M.length>200){M.shift()}M.push(o);return o}let Z=0;const ee=100;const W=new Array(ee).fill(0).map((e,t)=>{const n=Math.random()*Math.PI*2;const o=Math.cos(n);const r=Math.sin(n);const c=t/ee<.05;const i=t%3<=1;const a=o*(2e3+Math.random()*1e3);const s=r*(2e3+Math.random()*1e3);const d={...x(L),superSoldier:c,foeIndex:t,foeColor:c?i?"blue":"#a00":i?"#75f":"#f0a",horseFrame:Math.floor(Math.random()*100),goal:[a,s],gdist:0,ax:e=>(e.goal[0]-d.x)/2e3,ay:e=>(e.goal[1]-d.y)/2e3,x:a,y:s,rangeOverride:e=>!P(e.moving,e)?[0]:i?[0,4]:[0,3],speed:i?Math.max(.01,Math.random()/30):Math.max(.03,Math.random()/20),archerOrientation:e=>Math.sign(P(e.dx,e)),cache:true,soldier:i,process:o=>{if(!o.parent){return}if(o.dead&&o.time-o.dead>5e3){o.dead=0;o.speed=o.soldier?Math.max(.025,Math.random()/30):Math.max(.03,Math.random()/20)}G(o);const e=o.x-o.goal[0];const t=o.y-o.goal[1];o.gdist=Math.sqrt(e*e+t*t);const n=o.x-H.x;const r=o.y-H.y;const i=Math.sqrt(n*n+r*r);if(i<50&&!o.dead&&f){Z+=o.superSoldier?5:1;console.log("HIT",Z,(H.time-H.born)/1e3+"s");f=Math.max(0,f-(c?2:1));u();g=40;h.backgroundColor="#a00";setTimeout(()=>{h.backgroundColor="#efd"},150);if(!f){V(H,H.time,(H.x-o.x)*2,H.color);H.dead=H.time;v()}const e=Math.random()*Math.PI*2;const t=Math.cos(e);const n=Math.sin(e);o.x=H.x+t*2e3;o.y=H.y+n*2e3;H.dx=0;H.dy=0;H.hitTime=H.time}if(X||!f){if(!o.pausing){o.pausing=true;const a=o.x-(X??H).x;const s=o.y-(X??H).y;const d=Math.sqrt(a*a+s*s);o.goal[0]=H.x+a/d*2e3;o.goal[1]=H.y+s/d*2e3}}else{if(o.pausing){o.pausing=false}if(i>2500){if(Math.random()<.6||!H.dx&&!H.dy){const e=Math.random()*Math.PI*2;const t=Math.cos(e);const n=Math.sin(e);o.x=H.x+t*1500;o.y=H.y+n*1500}else{const l=Math.sqrt(H.dx*H.dx+H.dy*H.dy);o.x=H.x+H.dx*(1e3+Math.random()*500)/l+(Math.random()-.5)*300;o.y=H.y+H.dy*(1e3+Math.random()*500)/l+(Math.random()-.5)*300}if(o.dead){o.dead=0;o.speed=o.soldier?Math.max(.025,Math.random()/30):Math.max(.03,Math.random()/20)}o.gdist=0}if(o.gdist<100||i>(o.soldier?500:3e3)){o.goal[0]=H.x+(H.x-o.x)+(Math.random()-.5)*(o.soldier?200:300);o.goal[1]=H.y+(H.y-o.y)+(Math.random()-.5)*(o.soldier?200:300)}}},foe:true,width:(i?200*l:220*l)*(c?i?2:1.5:1),height:(i?180*l:180*l)*(c?i?2:1.5:1),riderAnimation:i?"soldier":"sword"};return d});let X=null;let Y=null;const r={};const te=30;const ne=new Array(te).fill(0).map((e,t)=>{const r=t<=1;const i=r?2e4:4e3;const a=i/2+500;const n={...x(L),cache:true,x:r?t*i:Math.random()*4e3-2e3,y:r?t*i/2:Math.random()*4e3-2e3,cellX:0,cellY:0,process:e=>{if(!e.parent){return}const t=e.x-H.x;const n=e.y-H.y;const o=Math.sqrt(t*t+n*n);if(o<(r?80:50)){if(r&&!R(e).closed){if(!Y){Y=e;e.enteredHut=e.time;f=d+k.maxHealth*2;u();v()}}else{g=20;H.x-=t;H.y-=n;H.dx=0;H.dy=0}}if(t>a*2){e.x-=i*2;e.cellX--}else if(t<-a*2){e.x+=i*2;e.cellX++}if(n>a){e.y-=i;e.cellY--}else if(n<-a){e.y+=i;e.cellY++}},foe:true,width:(r?600:500)*l,height:(r?400:350+Math.random()*200)*l,riderAnimation:r?"hut":"tree",foeColor:r?`rgb(${200}, ${100+t*55}, ${50+t*50})`:`rgb(${Math.random()*30}, ${Math.random()*150}, ${Math.random()*20})`,tree:true,hill:r,rangeOverride:r?[1]:undefined};return n});function R(e){if(!r[`${e.cellX}_${e.cellY}`]){r[`${e.cellX}_${e.cellY}`]={}}return r[`${e.cellX}_${e.cellY}`]}function oe(t){requestAnimationFrame(oe);if(t-m<=Q||!c){return}m=Math.max(m,t-100);const n=t-m;const o=n/20;m=t;if(g){D=Math.random()*g;g*=.5;if(g<.1){g=0}}C.clearRect(0,0,S.width,S.height);C.beginPath();C.strokeStyle="#038";C.lineWidth=6;for(let e=0;e<q;e++){const r=F[e];const q=50;const i=Math.sqrt(r.dx*r.dx+r.dy*r.dy)+1;C.moveTo(r.x-$[0],r.y-$[1]+D);C.lineTo(r.x-$[0]-r.dx/i*q,r.y-$[1]+D-r.dy/i*q);r.dy+=.3;r.x+=r.dx/i*q*o;r.y+=r.dy/i*q*o}C.stroke();for(let e=q-1;e>=0;e--){if(t-F[e].born>1500){B(e)}}C.strokeStyle="#380";C.lineWidth=2;s.length=0;re(s);y(H,t,n,s);W.forEach(e=>{y(e,t,n,s)});M.forEach(e=>{y(e,t,n,s)});ne.forEach(e=>{y(e,t,n,s)});s.sort((e,t)=>{if(e.layer!==t.layer){return e.layer-t.layer}return Math.sign(e.y-t.y)});X=null;s.forEach(e=>J(e,t));if(!f){const e=Math.min(.7,(t-H.dead)/3e3);C.fillStyle=`rgb(200,0,0,${e})`;C.fillRect(0,0,S.width,S.height);C.fill()}else if(!Y){p+=((H.dx*H.archerOrientation<0?0:H.dx)/2+H.archerOrientation*2-p)*.05;$[0]+=H.dt/20*(H.x-S.width/2-$[0]+p*80)*.1;$[1]+=H.dt/20*(H.y-S.height/2-$[1]+H.dy*50)*.1}else{const a=Math.min(1,(t-Y.enteredHut)/500);C.fillStyle=`rgb(0,0,0,${a})`;C.fillRect(0,0,S.width,S.height);C.fill()}}function re(){const n=200;C.beginPath();const o=[Math.round($[0]/n),Math.round($[1]/n)];for(let t=-15;t<15;t++){for(let e=-20;e<20;e++){const r=e+o[0];const i=t+o[1];const a=Math.sin(r*123+i*9991)+Math.sin(r*123/10+i*9991/100)+Math.sin(r*123/10+i*9991/100);const s=Math.cos(r*12331+i*2221)+Math.cos(r*12331/10+i*2221/10)+Math.cos(r*12331/100+i*2221/100);const d=a*500;const l=s*200;const c=r*n-$[0]+d;const h=i*n-$[1]+l;C.moveTo(c,h+D);C.lineTo(c+a*100,h+D+3);C.lineTo(c+a*100+s*100,h+D)}}C.stroke()}u();O();function ie(t){const n=new Array(Math.ceil(t.length*2));for(let e=0;e<t.length;e++){n[e*2]=t[e]%16;n[e*2+1]=(t[e]>>4)%16}return n}function ae(e){const t=[0,0];let n=0,o=0;do{n=e.pop()-7;o=e.pop()-7;t[0]+=n;t[1]+=o}while(n||o);let r,i;do{n=e.pop()-7;o=e.pop()-7;if(n||o){const a=r*o;const s=i*n;if(Math.abs(a-s)<5){t[t.length-2]+=n;t[t.length-1]+=o}else{t.push(t[t.length-2]+n,t[t.length-1]+o)}r=n;i=o}}while(n||o);return t}function se(t,n){const o=new Array(t.pop());for(let e=0;e<o.length;e++){o[e]=ae(t).map(e=>e*n)}return o}function de(t){const n=t.pop();const o=[];for(let e=0;e<n;e++){const r=t.pop()+(t.pop()<<4);o.push(String.fromCharCode(r))}return o.join("")}function le(t,n){const o=new Array(t.pop());for(let e=0;e<o.length;e++){o[e]={};o[e].name=de(t);o[e].lines=se(t,n);o[e].anim=t.pop();const r=t.pop();o[e].hidden=r===1}return o}function ce(t){const n=new Array(t.pop());for(let e=0;e<n.length;e++){n[e]=de(t)}return n}function he(e){const t=ie(e);const n={};t.reverse();const o=t.pop();n.animations=ce(t);n.shapes=le(t,o);return n}"use strict";var fe=function(){var K=function(e){return Math.sin(e*6.283184)};var e=function(e){return 2*(e%1)-1};var t=function(e){return e%1<.5?1:-1};var n=function(e){var t=e%1*4;if(t<2)return t-1;return 3-t};var k=function(e){return.003959503758*2**((e-128)/12)};var j=function(e,t,n){var o=_[e.i[0]],r=e.i[1],i=e.i[3]/32,a=_[e.i[4]],s=e.i[5],d=e.i[8]/32,l=e.i[9],c=e.i[10]*e.i[10]*4,h=e.i[11]*e.i[11]*4,f=e.i[12]*e.i[12]*4,u=1/f,y=-e.i[13]/16,m=e.i[14],p=n*2**(2-e.i[15]);var x=new Int32Array(c+h+f);var g=0,M=0;var v,w,b,A,S,C,$;for(v=0,w=0;v<c+h+f;v++,w++){if(w>=0){m=m>>8|(m&255)<<4;w-=p;C=k(t+(m&15)+e.i[2]-128);$=k(t+(m&15)+e.i[6]-128)*(1+8e-4*e.i[7])}b=1;if(v<c){b=v/c}else if(v>=c+h){b=(v-c-h)*u;b=(1-b)*3**(y*b)}g+=C*b**i;S=o(g)*r;M+=$*b**d;S+=a(M)*s;if(l){S+=(2*Math.random()-1)*l}x[v]=80*S*b|0}return x};var _=[K,t,e,n];var B,U,G,z,J;this.init=function(e){B=e;U=e.endPattern;G=0;z=e.rowLen*e.patternLen*(U+1)*2;J=new Int32Array(z)};this.generate=function(){var e,t,H,n,o,r,i,a,s,d,D,W,X,l,c,h,Y;var f=new Int32Array(z),u=B.songData[G],y=B.rowLen,m=B.patternLen;var p=0,x=0,g;var M,v=false;var w=[];for(n=0;n<=U;++n){a=u.p[n];for(o=0;o<m;++o){var b=a?u.c[a-1].f[o]:0;if(b){u.i[b-1]=u.c[a-1].f[o+m]||0;if(b<17){w=[]}}var A=_[u.i[16]],S=u.i[17]/512,C=2**(u.i[18]-9)/y,$=u.i[19],k=u.i[20],E=u.i[21]*43.23529*3.141592/44100,O=1-u.i[22]/255,T=u.i[23]*1e-5,q=u.i[24]/32,F=u.i[25]/512,R=6.283184*2**(u.i[26]-9)/y,L=u.i[27]/255,P=u.i[28]*y&~1;c=(n*m+o)*y;for(r=0;r<4;++r){i=a?u.c[a-1].n[o+r*m]:0;if(i){if(!w[i]){w[i]=j(u,i,y)}var I=w[i];for(t=0,e=c*2;t<I.length;t++,e+=2){f[e]+=I[t]}}}for(t=0;t<y;t++){s=(c+t)*2;l=f[s];if(l||v){h=E;if($){h*=A(C*s)*S+.5}h=1.5*Math.sin(h);p+=h*x;g=O*(l-x)-p;x+=h*g;l=k==3?x:k==1?g:p;if(T){l*=T;l=l<1?l>-1?K(l*.25):-1:1;l/=T}l*=q;v=l*l>1e-5;d=Math.sin(R*s)*F+.5;M=l*(1-d);l*=d}else{M=0}if(s>=P){M+=f[s-P+1]*L;l+=f[s-P]*L}f[s]=M|0;f[s+1]=l|0;J[s]+=M|0;J[s+1]+=l|0}}}G++;return G/B.numChannels};this.createAudioBuffer=function(e){var t=e.createBuffer(2,z/2,44100);for(var n=0;n<2;n++){var o=t.getChannelData(n);for(var r=n;r<z;r+=2){o[r>>1]=J[r]/65536}}return t};this.createWave=function(){var e=44;var t=e+z*2-8;var n=t-36;var o=new Uint8Array(e+z*2);o.set([82,73,70,70,t&255,t>>8&255,t>>16&255,t>>24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,n&255,n>>8&255,n>>16&255,n>>24&255]);for(var r=0,i=e;r<z;++r){var a=J[r];a=a<-32767?-32767:a>32767?32767:a;o[i++]=a&255;o[i++]=a>>8&255}return o};this.getData=function(e,t){var n=2*Math.floor(e*44100);var o=new Array(t);for(var r=0;r<2*t;r+=1){var i=n+r;o[r]=e>0&&i<J.length?J[i]/32768:0}return o}};